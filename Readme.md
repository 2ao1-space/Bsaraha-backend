# Bsaraha Backend API

ููุตุฉ ุงูุฑุณุงุฆู ุงููุฌูููุฉ - ุงููุงุฌูุฉ ุงูุฎูููุฉ

## ๐ ุงููุญุชููุงุช

- [ูุธุฑุฉ ุนุงูุฉ](#ูุธุฑุฉ-ุนุงูุฉ)
- [ุงูููุฒุงุช](#ุงูููุฒุงุช)
- [ุงููุชุทูุจุงุช](#ุงููุชุทูุจุงุช)
- [ุงูุชุซุจูุช](#ุงูุชุซุจูุช)
- [ุงูุฅุนุฏุงุฏุงุช](#ุงูุฅุนุฏุงุฏุงุช)
- [ุชุดุบูู ุงููุดุฑูุน](#ุชุดุบูู-ุงููุดุฑูุน)
- [ูููู ุงููุดุฑูุน](#ูููู-ุงููุดุฑูุน)
- [API Documentation](#api-documentation)
- [ูุงุนุฏุฉ ุงูุจูุงูุงุช](#ูุงุนุฏุฉ-ุงูุจูุงูุงุช)
- [ุงูุฃูุงู](#ุงูุฃูุงู)
- [ุงููุดุฑ](#ุงููุดุฑ)

## ๐ ูุธุฑุฉ ุนุงูุฉ

Bsaraha ูู ููุตุฉ ููุฑุณุงุฆู ุงููุฌูููุฉ ุชุชูุญ ูููุณุชุฎุฏููู ุฅุฑุณุงู ูุงุณุชูุจุงู ุงูุฑุณุงุฆู ุจุดูู ูุฌููู ุฃู ูุนุฑูู. ุชุชุถูู ุงูููุตุฉ ููุฒุงุช ูุซู ุงููุชุงุจุนุฉุ ูุงูุญุธุฑุ ูุงูุฅุจูุงุบุ ูููุญุฉ ุชุญูู ุฅุฏุงุฑูุฉ ุดุงููุฉ.

## โจ ุงูููุฒุงุช

### ุงููุณุชุฎุฏููู

- โ ุงูุชุณุฌูู ูุชุณุฌูู ุงูุฏุฎูู
- โ ุชุฃููุฏ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- โ ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
- โ ุฅุฏุงุฑุฉ ุงูููู ุงูุดุฎุตู
- โ ุฑูุน ุตูุฑุฉ ุงูููู ุงูุดุฎุตู

### ุงูุฑุณุงุฆู

- โ ุฅุฑุณุงู ุฑุณุงุฆู ูุฌูููุฉ ุฃู ูุนุฑููุฉ
- โ ุฅุฑูุงู ุงูุตูุฑ ูุน ุงูุฑุณุงุฆู
- โ ุงูุฑุฏ ุนูู ุงูุฑุณุงุฆู (ุนุงู ุฃู ุฎุงุต)
- โ ุญุฐู ุงูุฑุณุงุฆู
- โ ุฅุญุตุงุฆูุงุช ุงูุฑุณุงุฆู

### ุงูุชูุงุนู ุงูุงุฌุชูุงุนู

- โ ูุชุงุจุนุฉ/ุฅูุบุงุก ูุชุงุจุนุฉ ุงููุณุชุฎุฏููู
- โ ุญุธุฑ/ุฅูุบุงุก ุญุธุฑ ุงููุณุชุฎุฏููู
- โ ุฎูุงุตุฉ ุงูุฑุฏูุฏ ุงูุนุงูุฉ
- โ ุงูุจุญุซ ุนู ุงููุณุชุฎุฏููู

### ุงูุฅุจูุงุบ ูุงูุฅุฏุงุฑุฉ

- โ ุงูุฅุจูุงุบ ุนู ุงููุญุชูู ุงููุณูุก
- โ ููุญุฉ ุชุญูู ุฅุฏุงุฑูุฉ ุดุงููุฉ
- โ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงููุญุชูู
- โ ุฅุญุตุงุฆูุงุช ููุตูุฉ

### ุงูุฃูุงู

- โ ุชุดููุฑ ูููุงุช ุงููุฑูุฑ
- โ JWT ูููุตุงุฏูุฉ
- โ Rate Limiting
- โ ุญูุงูุฉ ูู XSS ู CSRF
- โ ุชูุธูู ุงููุฏุฎูุงุช

## ๐ ุงููุชุทูุจุงุช

- Node.js (ุงููุณุฎุฉ 16 ุฃู ุฃุญุฏุซ)
- MongoDB (Atlas ุฃู ูุญูู)
- npm ุฃู yarn

## ๐ ุงูุชุซุจูุช

1. **ุงุณุชูุณุงุฎ ุงููุดุฑูุน**

```bash
git clone <repository-url>
cd bsaraha-backend
```

2. **ุชุซุจูุช ุงูููุชุจุงุช**

```bash
npm install
```

3. **ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ**

```bash
cp .env.example .env
# ูู ุจุชุนุฏูู ููู .env ุจุงูููู ุงูููุงุณุจุฉ
```

4. **ุฅูุดุงุก ุญุณุงุจ ุงููุฏูุฑ**

```bash
npm run create-admin
```

## โ๏ธ ุงูุฅุนุฏุงุฏุงุช

### ููู .env

```env
# Database
MONGO_URI=mongodb+srv://username:password@cluster.mongodb.net/bsaraha

# JWT
JWT_SECRET=your-very-secure-jwt-secret

# Server
PORT=5000
NODE_ENV=development

# Frontend URL
FRONTEND_URL=http://localhost:3000

# Email Service (Gmail example)
EMAIL_USER=your-email@gmail.com
EMAIL_PASSWORD=your-app-password
EMAIL_FROM=noreply@bsaraha.com

# Security
BCRYPT_ROUNDS=12

# Admin
DEFAULT_ADMIN_EMAIL=admin@bsaraha.com
DEFAULT_ADMIN_PASSWORD=Admin@123456
```

### ุฅุนุฏุงุฏ ุฎุฏูุฉ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

#### Gmail

1. ุชูุนูู 2FA ุนูู ุญุณุงุจู
2. ุฅูุดุงุก App Password
3. ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ูู .env

#### SendGrid

```env
SENDGRID_API_KEY=your-sendgrid-api-key
```

#### Mailgun

```env
MAILGUN_API_KEY=your-mailgun-api-key
MAILGUN_DOMAIN=your-mailgun-domain
```

## ๐โโ๏ธ ุชุดุบูู ุงููุดุฑูุน

### ุงูุชุทููุฑ

```bash
npm run dev
```

### ุงูุฅูุชุงุฌ

```bash
npm start
```

### ุฅูุดุงุก ุงููุฏูุฑ ุงูุฃูู

```bash
node scripts/createAdmin.js
```

## ๐ ูููู ุงููุดุฑูุน

```
bsaraha-backend/
โโโ config/
โ   โโโ db.js                 # ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
โโโ middleware/
โ   โโโ auth.js               # ูุณุทุงุก ุงููุตุงุฏูุฉ
โ   โโโ security.js           # ูุณุทุงุก ุงูุฃูุงู
โโโ models/
โ   โโโ User.js               # ูููุฐุฌ ุงููุณุชุฎุฏู
โ   โโโ Message.js            # ูููุฐุฌ ุงูุฑุณุงูุฉ
โ   โโโ Follow.js             # ูููุฐุฌ ุงููุชุงุจุนุฉ
โ   โโโ Block.js              # ูููุฐุฌ ุงูุญุธุฑ
โ   โโโ Report.js             # ูููุฐุฌ ุงูุจูุงุบ
โโโ routes/
โ   โโโ auth.js               # ูุณุงุฑุงุช ุงููุตุงุฏูุฉ
โ   โโโ users.js              # ูุณุงุฑุงุช ุงููุณุชุฎุฏููู
โ   โโโ messages.js           # ูุณุงุฑุงุช ุงูุฑุณุงุฆู
โ   โโโ admin.js              # ูุณุงุฑุงุช ุงูุฅุฏุงุฑุฉ
โโโ services/
โ   โโโ emailService.js       # ุฎุฏูุฉ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
โโโ scripts/
โ   โโโ createAdmin.js        # ุฅูุดุงุก ุงููุฏูุฑ
โโโ utils/
โ   โโโ validation.js         # ูุณุงุนุฏุงุช ุงูุชุญูู
โโโ server.js                 # ุงูุฎุงุฏู ุงูุฑุฆูุณู
โโโ package.json
โโโ .env
โโโ README.md
```

## ๐ API Documentation

ุจุนุฏ ุชุดุบูู ุงูุฎุงุฏูุ ููููู ุงููุตูู ููุซุงุฆู API ูู ุฎูุงู:

```
http://localhost:5000/api-docs
```

### ููุงุท ุงููุตูู ุงูุฑุฆูุณูุฉ

#### ุงููุตุงุฏูุฉ

- `POST /api/auth/register` - ุงูุชุณุฌูู
- `POST /api/auth/login` - ุชุณุฌูู ุงูุฏุฎูู
- `POST /api/auth/verify-email` - ุชุฃููุฏ ุงูุจุฑูุฏ
- `POST /api/auth/forgot-password` - ูุณูุงู ูููุฉ ุงููุฑูุฑ
- `POST /api/auth/reset-password` - ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
- `GET /api/auth/me` - ูุนูููุงุช ุงููุณุชุฎุฏู ุงูุญุงูู
- `POST /api/auth/change-password` - ุชุบููุฑ ูููุฉ ุงููุฑูุฑ

#### ุงููุณุชุฎุฏููู

- `GET /api/users/:identifier` - ูุนูููุงุช ุงููุณุชุฎุฏู
- `PUT /api/users/profile` - ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู
- `PUT /api/users/settings` - ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช
- `POST /api/users/:userId/follow` - ูุชุงุจุนุฉ ูุณุชุฎุฏู
- `DELETE /api/users/:userId/unfollow` - ุฅูุบุงุก ุงููุชุงุจุนุฉ
- `POST /api/users/:userId/block` - ุญุธุฑ ูุณุชุฎุฏู
- `DELETE /api/users/:userId/unblock` - ุฅูุบุงุก ุงูุญุธุฑ
- `GET /api/users/search` - ุงูุจุญุซ ุนู ุงููุณุชุฎุฏููู

#### ุงูุฑุณุงุฆู

- `POST /api/messages/send` - ุฅุฑุณุงู ุฑุณุงูุฉ
- `GET /api/messages/inbox` - ุตูุฏูู ุงููุงุฑุฏ
- `PUT /api/messages/:messageId/read` - ุชูููุฒ ูููุฑูุกุฉ
- `POST /api/messages/:messageId/reply` - ุงูุฑุฏ ุนูู ุฑุณุงูุฉ
- `DELETE /api/messages/:messageId` - ุญุฐู ุฑุณุงูุฉ
- `GET /api/messages/feed` - ุฎูุงุตุฉ ุงูุฑุฏูุฏ
- `POST /api/messages/:messageId/report` - ุฅุจูุงุบ ุนู ุฑุณุงูุฉ

#### ุงูุฅุฏุงุฑุฉ

- `GET /api/admin/stats` - ุฅุญุตุงุฆูุงุช ุนุงูุฉ
- `GET /api/admin/users` - ูุงุฆูุฉ ุงููุณุชุฎุฏููู
- `PUT /api/admin/users/:userId/status` - ุชุญุฏูุซ ุญุงูุฉ ุงููุณุชุฎุฏู
- `GET /api/admin/reports` - ูุงุฆูุฉ ุงูุจูุงุบุงุช
- `PUT /api/admin/reports/:reportId/review` - ูุฑุงุฌุนุฉ ุจูุงุบ

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูููุงุฐุฌ

#### User

```javascript
{
  email: String,
  username: String,
  password: String,
  firstName: String,
  lastName: String,
  bio: String,
  profilePicture: String,
  isVerified: Boolean,
  isAdmin: Boolean,
  status: String, // active, blocked, banned
  messageLink: String,
  settings: {
    allowAnonymousMessages: Boolean,
    emailNotifications: Boolean
  }
}
```

#### Message

```javascript
{
  recipient: ObjectId,
  sender: ObjectId, // null for anonymous
  content: String,
  image: String,
  isAnonymous: Boolean,
  isRead: Boolean,
  reply: {
    content: String,
    isPublic: Boolean,
    createdAt: Date
  }
}
```

#### Follow

```javascript
{
  follower: ObjectId,
  following: ObjectId
}
```

#### Block

```javascript
{
  blocker: ObjectId,
  blocked: ObjectId,
  reason: String
}
```

#### Report

```javascript
{
  reporter: ObjectId,
  reportedUser: ObjectId,
  reportedMessage: ObjectId,
  type: String,
  description: String,
  screenshot: String,
  status: String // pending, reviewed, resolved, dismissed
}
```

## ๐ ุงูุฃูุงู

### ุงูููุฒุงุช ุงูุฃูููุฉ ุงููุทุจูุฉ

1. **ุชุดููุฑ ูููุงุช ุงููุฑูุฑ** ุจุงุณุชุฎุฏุงู bcrypt
2. **JWT ูููุตุงุฏูุฉ** ูุน ุงูุชูุงุก ุตูุงุญูุฉ
3. **Rate Limiting** ูููุน ุงููุฌูุงุช
4. **ุญูุงูุฉ ูู XSS** ูุชูุธูู ุงููุฏุฎูุงุช
5. **CORS Policy** ูุญุฏูุฏ ูููุทุงูุงุช ุงููุณููุญุฉ
6. **Helmet** ูุฑุคูุณ ุงูุฃูุงู
7. **ุชุณุฌูู ุงูุฃูุดุทุฉ ุงููุดุจููุฉ**
8. **ุญูุงูุฉ ูู NoSQL Injection**

### ุฅุนุฏุงุฏุงุช Rate Limiting

- **ุนุงู**: 100 ุทูุจ ูู 15 ุฏูููุฉ
- **ุงููุตุงุฏูุฉ**: 5 ุทูุจุงุช ูู 15 ุฏูููุฉ
- **ุงูุฑุณุงุฆู**: 10 ุฑุณุงุฆู ูู ุฏูููุฉ
- **ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ**: 3 ุทูุจุงุช ูู ุณุงุนุฉ
- **ุงูุจุญุซ**: 30 ุทูุจ ูู ุฏูููุฉ

## ๐ ุงููุดุฑ

### ูุชุทูุจุงุช ุงููุดุฑ

1. **MongoDB Atlas** ุฃู ุฎุงุฏู MongoDB
2. **ุฎุฏูุฉ ุจุฑูุฏ ุฅููุชุฑููู** (SendGrid, Mailgun, Gmail)
3. **ุฎุงุฏู Node.js** (Heroku, DigitalOcean, AWS, etc.)

### ุฎุทูุงุช ุงููุดุฑ ุนูู Heroku

1. **ุฅูุดุงุก ุชุทุจูู Heroku**

```bash
heroku create bsaraha-api
```

2. **ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ**

```bash
heroku config:set MONGO_URI=mongodb+srv://...
heroku config:set JWT_SECRET=your-secret
heroku config:set NODE_ENV=production
# ... ุจุงูู ุงููุชุบูุฑุงุช
```

3. **ุงููุดุฑ**

```bash
git push heroku main
```

4. **ุฅูุดุงุก ุงููุฏูุฑ**

```bash
heroku run node scripts/createAdmin.js
```

### ุฎุทูุงุช ุงููุดุฑ ุนูู VPS

1. **ุชุซุจูุช Node.js ู MongoDB**
2. **ูุณุฎ ุงููุดุฑูุน ูุชุซุจูุช ุงูููุชุจุงุช**
3. **ุฅุนุฏุงุฏ PM2 ูุฅุฏุงุฑุฉ ุงูุนูููุงุช**

```bash
npm install -g pm2
pm2 start server.js --name "bsaraha-api"
pm2 startup
pm2 save
```

4. **ุฅุนุฏุงุฏ Nginx ูู Reverse Proxy**
5. **ุฅุนุฏุงุฏ SSL Certificate**

## ๐ค ุงููุณุงููุฉ

1. Fork the project
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## ๐ ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ูุฑุฎุต ุชุญุช ุฑุฎุตุฉ MIT - ุงูุธุฑ ููู [LICENSE](LICENSE) ููุชูุงุตูู.

## ๐ ุงูุชูุงุตู

- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: support@bsaraha.com
- GitHub Issues: [ุงููุดุงูู](https://github.com/yourusername/bsaraha-backend/issues)

## ๐ ุดูุฑ ูุชูุฏูุฑ

- Express.js Framework
- MongoDB & Mongoose
- JWT for Authentication
- All contributors and supporters

---

ุชู ุชุทููุฑ ูุฐุง ุงููุดุฑูุน ุจู โค๏ธ ูููุฌุชูุน ุงูุนุฑุจู
